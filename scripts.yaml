turn_off_desk_lamp:
  sequence:
  - repeat:
      while:
      - condition: or
        conditions:
        - condition: sun
          before: sunrise
        - condition: sun
          after: sunrise
      sequence:
      - wait_for_trigger:
        - platform: event
          event_type: state_changed
          event_data:
            entity_id: sensor.button_1_action
      - type: toggle
        device_id: 7b345b3e26eb23625d0eec8244edf57b
        entity_id: light.desk_lamp
        domain: light
  mode: queued
  max: 10
  alias: Toggle desk lamp
